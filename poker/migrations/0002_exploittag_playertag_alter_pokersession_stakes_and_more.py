# Generated by Django 4.2.27 on 2026-01-10 11:23

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        ('poker', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='ExploitTag',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=80, unique=True)),
                ('description', models.CharField(blank=True, max_length=200)),
            ],
        ),
        migrations.CreateModel(
            name='PlayerTag',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50, unique=True)),
                ('color', models.CharField(blank=True, help_text="Optional UI hint (e.g. 'red', '#ff0000').", max_length=20)),
            ],
        ),
        migrations.AlterField(
            model_name='pokersession',
            name='stakes',
            field=models.CharField(choices=[('00', 'All'), ('12', '1/2'), ('13', '1/3'), ('23', '2/3'), ('25', '2/5'), ('55', '5/5'), ('510', '5/10'), ('2040', '20/40')], max_length=20),
        ),
        migrations.CreateModel(
            name='PlayerProfile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('display_name', models.CharField(help_text="What you call them (e.g., 'Hat Guy', 'Mike').", max_length=120)),
                ('approximate_age', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('description', models.TextField(blank=True, help_text='Physical / behavior identifiers (non-sensitive).')),
                ('image', models.ImageField(blank=True, null=True, upload_to='player_images/')),
                ('summary', models.CharField(blank=True, help_text="One-line take (e.g., 'Loose passive station; never bluffs river').", max_length=240)),
                ('created', models.DateTimeField(auto_now_add=True)),
                ('updated', models.DateTimeField(auto_now=True)),
                ('casino', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='poker.casino')),
                ('tags', models.ManyToManyField(blank=True, related_name='players', to='poker.playertag')),
            ],
        ),
        migrations.CreateModel(
            name='PlayerObservation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('street', models.CharField(blank=True, choices=[('pre', 'Preflop'), ('flop', 'Flop'), ('turn', 'Turn'), ('river', 'River')], max_length=10)),
                ('situation', models.CharField(blank=True, help_text="e.g., 'BTN vs BB SRP', '3bet pot OOP'", max_length=120)),
                ('action', models.CharField(help_text='What happened (short, structured).', max_length=200)),
                ('takeaway', models.CharField(blank=True, help_text='Your exploit / adjustment.', max_length=240)),
                ('reliability', models.PositiveSmallIntegerField(default=3, help_text='1-5 how trustworthy this read is.')),
                ('happened_at', models.DateTimeField(blank=True, null=True)),
                ('created', models.DateTimeField(auto_now_add=True)),
                ('player', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='observations', to='poker.playerprofile')),
                ('session', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='poker.pokersession')),
            ],
            options={
                'ordering': ['-created'],
            },
        ),
        migrations.CreateModel(
            name='PlayerExploit',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('strength', models.PositiveSmallIntegerField(default=1)),
                ('confidence', models.PositiveSmallIntegerField(default=3)),
                ('note', models.CharField(blank=True, max_length=240)),
                ('updated', models.DateTimeField(auto_now=True)),
                ('player', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='exploits', to='poker.playerprofile')),
                ('tag', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='player_links', to='poker.exploittag')),
            ],
        ),
        migrations.CreateModel(
            name='PlayerTendency',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('metric', models.CharField(choices=[('vpip', 'VPIP (plays lots of hands)'), ('pfr', 'PFR (raises preflop)'), ('3bet', '3-bet frequency'), ('fold_to_3bet', 'Folds to 3-bet'), ('calls_3bet', 'Calls 3-bets'), ('cbet_flop', 'C-bet flop'), ('fold_to_cbet_flop', 'Folds to flop c-bet'), ('xr_flop', 'Check-raise flop'), ('barrel_turn', 'Barrels turn'), ('fold_to_turn_bet', 'Folds to turn bet'), ('value_heavy_river', 'River raises = value-heavy'), ('bluffy_river', 'Bluffy on river')], max_length=40)),
                ('street', models.CharField(blank=True, choices=[('pre', 'Preflop'), ('flop', 'Flop'), ('turn', 'Turn'), ('river', 'River')], max_length=10)),
                ('value', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('sample_size', models.PositiveIntegerField(default=0)),
                ('confidence', models.PositiveSmallIntegerField(default=1, help_text='1-5 subjective confidence.')),
                ('note', models.CharField(blank=True, max_length=240)),
                ('updated', models.DateTimeField(auto_now=True)),
                ('player', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='tendencies', to='poker.playerprofile')),
            ],
            options={
                'indexes': [models.Index(fields=['player', 'metric'], name='poker_playe_player__3764d3_idx')],
            },
        ),
        migrations.AddConstraint(
            model_name='playertendency',
            constraint=models.UniqueConstraint(fields=('player', 'metric', 'street'), name='uniq_player_metric_street'),
        ),
        migrations.AddIndex(
            model_name='playerprofile',
            index=models.Index(fields=['display_name'], name='poker_playe_display_0121c3_idx'),
        ),
        migrations.AddIndex(
            model_name='playerobservation',
            index=models.Index(fields=['player', '-created'], name='poker_playe_player__c1b427_idx'),
        ),
        migrations.AddConstraint(
            model_name='playerexploit',
            constraint=models.UniqueConstraint(fields=('player', 'tag'), name='uniq_player_exploit_tag'),
        ),
    ]
