{% extends 'poker/base.html' %}

{% block content %}
  <h2>Session List for Stakes 2/5</h2>

  <form method="get" action="{% url 'poker:session_list_25' %}" class="mb-3">
    <div class="container">
      <div class="row align-items-start">
        <div class="col-md-2 mb-2">
          <label for="month">Month:</label>
          <select name="month" id="month" class="form-control">
            {% for month, month_name in month_choices %}
              <option value="{{ month }}" {% if month == requested_month %}selected{% endif %}>{{ month_name }}</option>
            {% endfor %}
          </select>
        </div>
  
        <div class="col-md-2 mb-2">
          <label for="year">Year:</label>
          <input type="number" name="year" id="year" value="{{ current_year }}" min="2000" max="2100" class="form-control">
        </div>
  
        <div class="col-md-2 m-4">
          <button type="submit" class="btn btn-primary">Filter</button>
        </div>
      </div>
    </div>
  </form>

  <!-- Display any relevant information here, e.g., overall stats -->

  <table class="table table-striped table-bordered">
    <thead class="thead-dark">
      <tr>
        <th>Date</th>
        <th>Win/Loss</th>
        <th>Hourly Rate</th>
        <!-- Add more table headers as needed -->
      </tr>
    </thead>
    <tbody>
      {% for session in sessions %}
        <tr>
         <td> <a href="{% url 'poker:session_detail' session_id=session.id %}">
            {{ session.date }}
          </a></td>
          <td>
            {% if session.win_loss > 0 %}
              <span class="text-success">${{ session.win_loss|floatformat:2 }}</span>
            {% elif session.win_loss < 0 %}
              <span class="text-danger">${{ session.win_loss|floatformat:2 }}</span>
            {% else %}
              ${{ session.win_loss|floatformat:2 }}
            {% endif %}
          </td>
          <td>
            {% if session.win_rate_per_hour > 0 %}
              <span class="text-success">${{ session.win_rate_per_hour|floatformat:2 }}</span>
            {% elif session.win_rate_per_hour < 0 %}
              <span class="text-danger">${{ session.win_rate_per_hour|floatformat:2 }}</span>
            {% else %}
              ${{ session.win_rate_per_hour|floatformat:2 }}
            {% endif %}
          </td>
          <!-- Add more table cells as needed -->
        </tr>
      {% endfor %}
    </tbody>
    <tfoot>
      <tr>
        <th scope="row">Totals</th>
        <td></td>
        <td colspan="3">
          {% if overall_hourly_rate > 0 %}
          <span class="text-success">${{ overall_hourly_rate|floatformat:2 }}</span>
          {% elif overall_hourly_rate < 0 %}
          <span class="text-danger">${{ overall_hourly_rate|floatformat:2 }}</span>
          {% else %}
          ${{ overall_hourly_rate|floatformat:2 }}
        {% endif %}
        </td>
      </tr>
    </tfoot>
  </table>
{% endblock %}